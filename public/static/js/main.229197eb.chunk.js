(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(2),r=a.n(s),i=a(8),c=a.n(i),o=(a(15),a(9)),l=a(3),d=a(4),p=a(1),u=a(6),h=a(5),b=(a(16),a(17),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"header",children:Object(n.jsx)("div",{className:"header__logo"})})}}]),a}(r.a.Component)),j=(a(18),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=(new Date).getFullYear();return Object(n.jsx)("footer",{className:"footer",children:Object(n.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia "]})})}}]),a}(r.a.Component)),m=r.a.createContext(),_=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={selectedCard:e.selectedCard},n.render=n.render.bind(Object(p.a)(n)),n.handleCardClick=n.handleCardClick.bind(Object(p.a)(n)),n.handleLikeClick=n.handleLikeClick.bind(Object(p.a)(n)),n.handleDeleteClick=n.handleDeleteClick.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"handleLikeClick",value:function(){this.props.onCardLike(this.props.cardInfo)}},{key:"handleDeleteClick",value:function(e){this.props.onCardDelete(this.props.cardInfo)}},{key:"handleCardClick",value:function(){this.props.onCardClick(this.props.cardInfo.link,this.props.cardInfo.name)}},{key:"render",value:function(){var e=this,t=this.props.cardInfo.owner._id===this.context._id,a=this.props.cardInfo.likes.some((function(t){return t._id===e.context._id}));return void 0!==this.props.cardInfo?Object(n.jsx)("div",{className:"card-template",children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("img",{src:this.props.cardInfo.link,alt:this.props.cardInfo.name,className:"card__image",onClick:this.handleCardClick}),Object(n.jsx)("button",{"aria-label":"Delete card",onClick:this.handleDeleteClick,className:t?"card__trash-can":""}),Object(n.jsxs)("div",{className:"card__section",children:[Object(n.jsx)("h2",{className:"card__title",children:this.props.cardInfo.name}),Object(n.jsxs)("div",{className:"card__like-container",children:[Object(n.jsx)("button",{"aria-label":"Like-button",type:"button",onClick:this.handleLikeClick,className:a?"card__like card_liked":"card__like"}),Object(n.jsx)("p",{className:"card__likes-number",children:this.props.cardInfo.likes.length})]})]})]})}):Object(n.jsx)("div",{})}}]),a}(r.a.Component);_.contextType=m;var f=_,O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=n.render.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("main",{children:[Object(n.jsxs)("section",{className:"profile",children:[Object(n.jsxs)("div",{className:"profile__column",children:[Object(n.jsxs)("div",{className:"profile__avatar-container",children:[Object(n.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(this.context.avatar,")")}}),Object(n.jsx)("div",{className:"profile__avatar-edit",onClick:this.props.openEditAvatarPopup,children:Object(n.jsx)("div",{className:"profile__avatar-edit-ico"})})]}),Object(n.jsxs)("div",{className:"profile__info",children:[Object(n.jsxs)("div",{className:"profile__info-column",children:[Object(n.jsx)("p",{className:"profile__user-name",children:this.context.name}),Object(n.jsx)("button",{"aria-label":"Edit profile",type:"button",className:"profile__edit-button",onClick:this.props.openEditProfilePopup})]}),Object(n.jsx)("p",{className:"profile__subtitle",children:this.context.about})]})]}),Object(n.jsx)("button",{"aria-label":"Add new card",type:"button",className:"profile__add-button",onClick:this.props.openAddPlacePopup})]}),Object(n.jsx)("section",{className:"elements",children:this.props.cards.map((function(t){return Object(n.jsx)(f,{cardInfo:t,onCardClick:e.props.onCardClick,onCardLike:e.props.onCardLike,onCardDelete:e.props.onCardDelete},t._id)}))})]})}}]),a}(r.a.Component);O.contextType=m;var v=O,C=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=n.render.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"render",value:function(){return this.props.selectedCard?Object(n.jsxs)("div",{className:"popup-image popup_opened",children:[Object(n.jsx)("div",{className:"popup-image__overlay popup-overlay"}),Object(n.jsx)("div",{className:"popup-image__container",children:Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:this.props.srcImg,alt:this.props.title,className:"popup-image__item"}),Object(n.jsx)("p",{className:"popup-image__title",children:this.props.title}),Object(n.jsx)("button",{"aria-label":"Close",className:"popup-image__escape-button popup_close_button",onClick:this.props.closeAllPopups})]})})]}):null}}]),a}(r.a.Component),k=new(function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this))._baseUrl=e.url,n._headers=e.headers,n}return Object(d.a)(a,[{key:"_controlError",value:function(e){return e.then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getAllCards",value:function(){var e=fetch("".concat(this._baseUrl,"cards"),{method:"GET",headers:this._headers});return this._controlError(e)}},{key:"addNewCard",value:function(e){var t=fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})});return this._controlError(t)}},{key:"getUserInfo",value:function(){var e=fetch("".concat(this._baseUrl,"users/me"),{method:"GET",headers:this._headers});return this._controlError(e)}},{key:"setUserInfo",value:function(e){var t=fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})});return this._controlError(t)}},{key:"setUserAvatar",value:function(e){var t=fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})});return this._controlError(t)}},{key:"deleteCardById",value:function(e){var t=fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers});return this._controlError(t)}},{key:"changeLikeCardStatus",value:function(e,t){if(!0===t){var a=fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers});return this._controlError(a)}var n=fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"PUT",headers:this._headers});return this._controlError(n)}}]),a}(r.a.Component))({url:"https://mesto.nomoreparties.co/v1/cohort-17/",headers:{authorization:"cef396cb-7f39-49a2-a008-1d3b290a4906","Content-Type":"application/json"}}),x=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=n.render.bind(Object(p.a)(n)),n.state={isOpen:n.props.isOpen},n}return Object(d.a)(a,[{key:"render",value:function(){return!0===this.state.isOpen?Object(n.jsxs)("div",{className:"popup popup_opened popup_type_".concat(this.props.name),children:[Object(n.jsx)("div",{className:"popup__overlay"}),Object(n.jsxs)("form",{name:"popup_type_".concat(this.props.name),onSubmit:this.props.onSubmit,className:"popup__form popup__container",children:[Object(n.jsx)("p",{className:"popup__title",children:"".concat(this.props.title)}),Object(n.jsx)("div",{children:this.props.children}),Object(n.jsx)("button",{"aria-label":"Save",type:"submit",className:" popup__button popup__save-button save__button",tabIndex:"0",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(n.jsx)("button",{"aria-label":"Close popup",type:"button",className:"popup__escape-button popup_close_button",onClick:this.props.closeAllPopups})]})]}):Object(n.jsx)("div",{})}}]),a}(r.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=n.render.bind(Object(p.a)(n)),n.state={name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",inputUserName:"",inputUserAbout:""},n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.render=n.render.bind(Object(p.a)(n)),n.handleChangeUserAbout=n.handleChangeUserAbout.bind(Object(p.a)(n)),n.handleChangeUserName=n.handleChangeUserName.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onUpdateUser({name:this.state.inputUserName,about:this.state.inputUserAbout})}},{key:"handleChangeUserName",value:function(e){this.setState({inputUserName:e.target.value})}},{key:"handleChangeUserAbout",value:function(e){this.setState({inputUserAbout:e.target.value})}},{key:"render",value:function(){return Object(n.jsx)(x,{closeAllPopups:this.props.onClose,onSubmit:this.handleSubmit,isOpen:this.props.isOpen,name:this.state.name,title:this.state.title,children:Object(n.jsxs)("div",{className:"popup__input-box",children:[Object(n.jsx)("input",{id:"input-name",type:"text",name:"user",placeholder:"\u0418\u043c\u044f",autoComplete:"off",minLength:"2",maxLength:"40",className:"popup__input form__input  form__input_first form__input_name",tabIndex:"0",onChange:this.handleChangeUserName,value:this.state.inputUserName,required:!0}),Object(n.jsx)("span",{id:"input-name-error",className:"popup__error"}),Object(n.jsx)("input",{onChange:this.handleChangeUserAbout,value:this.state.inputUserAbout,id:"input-subtitle",type:"text",name:"about-user",placeholder:"\u041e \u0441\u0435\u0431\u0435",autoComplete:"off",minLength:"2",required:!0,className:"form__input_second popup__input form__input form__input_subtitle",tabIndex:"0"}),Object(n.jsx)("span",{id:"input-subtitle-error",className:"popup__error"})]})})}}]),a}(r.a.Component);N.contextType=m;var y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).avatarRef=r.a.createRef(),n.state={name:"avatar",title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u0430"},n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onUpdateAvatar(this.avatarRef.current.value)}},{key:"render",value:function(){return Object(n.jsx)(x,{closeAllPopups:this.props.onClose,onSubmit:this.handleSubmit,isOpen:this.props.isOpen,name:this.state.name,title:this.state.title,children:Object(n.jsxs)("div",{className:"popup__input-box",children:[Object(n.jsx)("input",{id:"input-avatar-url",type:"url",ref:this.avatarRef,name:"avatar-src",autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,className:"popup__input popup-avatar__input  form__input  form__input_src form__input_first form__input_second",tabIndex:"0"}),Object(n.jsx)("span",{id:"input-avatar-url-error"})]})})}}]),a}(r.a.Component),P=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={name:"place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",cardName:"",cardLink:""},n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.render=n.render.bind(Object(p.a)(n)),n.handleChangeCardLink=n.handleChangeCardLink.bind(Object(p.a)(n)),n.handleChangeCardName=n.handleChangeCardName.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log({name:this.state.cardName,link:this.state.cardLink}),this.props.onAddPlace({name:this.state.cardName,link:this.state.cardLink})}},{key:"handleChangeCardName",value:function(e){this.setState({cardName:e.target.value})}},{key:"handleChangeCardLink",value:function(e){this.setState({cardLink:e.target.value})}},{key:"render",value:function(){return Object(n.jsx)(x,{closeAllPopups:this.props.onClose,isOpen:this.props.isOpen,onSubmit:this.handleSubmit,name:this.state.name,title:this.state.title,children:Object(n.jsxs)("div",{className:"popup__input-box",children:[Object(n.jsx)("input",{id:"input-card-name",onChange:this.handleChangeCardName,value:this.state.cardName,type:"text",minLength:"1",maxLength:"30",name:"card-name",autoComplete:"off",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,className:" popup__input popup-card__input  form__input   form__input_name  form__input_first",tabIndex:"0"}),Object(n.jsx)("span",{id:"input-card-name-error",className:"popup__error "}),Object(n.jsx)("input",{id:"input-url",onChange:this.handleChangeCardLink,value:this.state.cardLink,type:"url",name:"card-src",autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,className:"popup__input popup-card__input  form__input  form__input_src form__input_second",tabIndex:"0"}),Object(n.jsx)("span",{id:"input-url-error",className:"popup__error "})]})})}}]),a}(r.a.Component),g=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,name:"",title:"",children:"",isOpen:!1,onClose:!0,selectedCard:!1,currentUser:"",cards:[]},n.handleEditProfileClick=n.handleEditProfileClick.bind(Object(p.a)(n)),n.handleEditAvatarClick=n.handleEditAvatarClick.bind(Object(p.a)(n)),n.handleAddPlaceClick=n.handleAddPlaceClick.bind(Object(p.a)(n)),n.handleCardClick=n.handleCardClick.bind(Object(p.a)(n)),n.closeAllPopups=n.closeAllPopups.bind(Object(p.a)(n)),n.render=n.render.bind(Object(p.a)(n)),n.componentDidMount=n.componentDidMount.bind(Object(p.a)(n)),n.handleUpdateUser=n.handleUpdateUser.bind(Object(p.a)(n)),n.handleUpdateAvatar=n.handleUpdateAvatar.bind(Object(p.a)(n)),n.handleAddCard=n.handleAddCard.bind(Object(p.a)(n)),n.handleCardDelete=n.handleCardDelete.bind(Object(p.a)(n)),n.handleCardLike=n.handleCardLike.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.getUserInfo().then((function(t){e.setState({currentUser:t})})).catch((function(e){console.log(e)})),k.getAllCards().then((function(t){e.setState({cards:t})})).catch((function(e){console.log(e)}))}},{key:"handleUpdateUser",value:function(e){var t=this;k.setUserInfo(e).then((function(e){t.setState({currentUser:e}),t.closeAllPopups()})).catch((function(e){console.log(e)}))}},{key:"handleUpdateAvatar",value:function(e){var t=this;k.setUserAvatar(e).then((function(e){t.setState({currentUser:e}),t.closeAllPopups()})).catch((function(e){console.log(e)}))}},{key:"handleAddCard",value:function(e){var t=this;k.addNewCard(e).then((function(e){t.setState({cards:[e].concat(Object(o.a)(t.state.cards))}),t.closeAllPopups()})).catch((function(e){console.log(e)}))}},{key:"closeAllPopups",value:function(){this.setState({isOpen:!1,selectedCard:!1,onClose:!0,isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1})}},{key:"handleEditProfileClick",value:function(e){this.setState({onClose:!this.state.onClose,isOpen:!this.state.isOpen,name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isEditProfilePopupOpen:!0})}},{key:"handleEditAvatarClick",value:function(e){this.setState({onClose:!this.state.onClose,isOpen:!this.state.isOpen,name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isEditAvatarPopupOpen:!0})}},{key:"handleAddPlaceClick",value:function(e){this.setState({onClose:!this.state.onClose,name:"place",isOpen:!this.state.isOpen,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isAddPlacePopupOpen:!0})}},{key:"handleCardClick",value:function(e,t){this.setState({selectedCard:!0,onClose:!1,cardLink:e,cardTitle:t})}},{key:"handleCardLike",value:function(e){var t=this,a=e.likes.some((function(e){return e._id===t.state.currentUser._id}));k.changeLikeCardStatus(e._id,a).then((function(a){var n=t.state.cards.map((function(t){return t._id===e._id?a:t}));t.setState({cards:n})}))}},{key:"handleCardDelete",value:function(e){var t=this;k.deleteCardById(e._id).then((function(a){var n=t.state.cards.filter((function(t){return t._id!==e._id?t:null}));t.setState({cards:n})}))}},{key:"render",value:function(){return Object(n.jsx)(m.Provider,{value:this.state.currentUser,children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("div",{className:"page",children:[Object(n.jsx)(b,{}),Object(n.jsx)(v,{openAddPlacePopup:this.handleAddPlaceClick,openEditProfilePopup:this.handleEditProfileClick,openEditAvatarPopup:this.handleEditAvatarClick,onCardClick:this.handleCardClick,closeAllPopups:this.closeAllPopups,cards:this.state.cards,onCardLike:this.handleCardLike,onCardDelete:this.handleCardDelete}),Object(n.jsx)(j,{})]}),!0===this.state.isEditProfilePopupOpen?Object(n.jsx)(N,{isOpen:this.state.isEditProfilePopupOpen,onUpdateUser:this.handleUpdateUser,onClose:this.closeAllPopups}):null,!0===this.state.isEditAvatarPopupOpen?Object(n.jsx)(y,{isOpen:this.state.isEditAvatarPopupOpen,onUpdateAvatar:this.handleUpdateAvatar,onClose:this.closeAllPopups}):null,!0===this.state.isAddPlacePopupOpen?Object(n.jsx)(P,{isOpen:this.state.isAddPlacePopupOpen,onAddPlace:this.handleAddCard,onClose:this.closeAllPopups}):null,Object(n.jsx)(C,{srcImg:this.state.cardLink,title:this.state.cardTitle,closeAllPopups:this.closeAllPopups,selectedCard:this.state.selectedCard})]})})}}]),a}(r.a.Component);g.contextType=m;var A=g,U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};c.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(A,{})}),document.getElementById("root")),U()}},[[19,1,2]]]);
//# sourceMappingURL=main.229197eb.chunk.js.map